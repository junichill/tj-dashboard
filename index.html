<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>SVG Flip Clock</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ===== Clock ===== */

#clock-svg {
  width: 820px;
  height: 260px;
}

/* パネル */
.panel {
  fill: #3c3e3c;
}

/* 数字（←ここが本体。数字だけ大きい） */
.digit {
  fill: white;
  font-family: "Noto Sans JP", sans-serif;
  font-weight: 700;
  font-size: 115px;
  text-anchor: middle;
}

/* コロン（中央揃え） */
#colon {
  fill: white;
  font-size: 90px;
  opacity: 0.8;
  dominant-baseline: middle;
  text-anchor: middle;
}

/* 秒（小さめ・下寄せ） */
#seconds {
  fill: white;
  font-size: 42px;
  opacity: 0.8;
  text-anchor: middle;
}

/* フリップ回転基準 */
.flip-top {
  transform-origin: center bottom;
}
.flip-bottom {
  transform-origin: center top;
}
</style>
</head>

<body>

<svg id="clock-svg" viewBox="0 0 820 260">
  <!-- 時 -->
  <g id="h1" transform="translate(0,0)"></g>
  <g id="h2" transform="translate(140,0)"></g>

  <!-- コロン -->
  <text id="colon" x="300" y="135">:</text>

  <!-- 分 -->
  <g id="m1" transform="translate(360,0)"></g>
  <g id="m2" transform="translate(500,0)"></g>

  <!-- 秒 -->
  <text id="seconds" x="690" y="190">00</text>
</svg>

<script>
/* ===== SVG Flip Clock ===== */

function createDigit(group) {
  group.innerHTML = `
    <rect class="panel" x="0" y="0" width="120" height="90" rx="6"/>
    <rect class="panel" x="0" y="90" width="120" height="90" rx="6"/>

    <text class="digit flip-top" x="60" y="72">0</text>
    <text class="digit flip-bottom" x="60" y="162">0</text>
  `;
}

["h1","h2","m1","m2"].forEach(id => {
  createDigit(document.getElementById(id));
});

function flip(group, from, to) {
  if (from === to) return;

  const top = group.querySelector(".flip-top");
  const bottom = group.querySelector(".flip-bottom");

  top.textContent = from;
  bottom.textContent = to;

  top.animate(
    [{ transform: "rotateX(0deg)" }, { transform: "rotateX(-90deg)" }],
    { duration: 300, easing: "ease-in", fill: "forwards" }
  );

  bottom.animate(
    [{ transform: "rotateX(90deg)" }, { transform: "rotateX(0deg)" }],
    { duration: 300, easing: "ease-out", delay: 300, fill: "forwards" }
  );
}

let prev = "";

function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,"0");
  const m = String(now.getMinutes()).padStart(2,"0");
  const s = String(now.getSeconds()).padStart(2,"0");

  const cur = h + m;

  if (prev) {
    if (prev[0] !== h[0]) flip(h1, prev[0], h[0]);
    if (prev[1] !== h[1]) flip(h2, prev[1], h[1]);
    if (prev[2] !== m[0]) flip(m1, prev[2], m[0]);
    if (prev[3] !== m[1]) flip(m2, prev[3], m[1]);
  }

  document.getElementById("seconds").textContent = s;
  prev = cur;
}

updateClock();
setInterval(updateClock, 1000);
</script>

</body>
</html>
